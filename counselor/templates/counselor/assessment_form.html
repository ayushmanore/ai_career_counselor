{% extends "counselor/base.html" %}

{% block title %}New Assessment - AI Career Counselor{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row">
    <div class="col-lg-10 mx-auto">
      <div class="card shadow">
        <div class="card-header bg-primary text-white text-center">
          <h3 class="mb-0"><i class="fas fa-clipboard-list me-2"></i>AI Career Assessment</h3>
          <p class="mb-0">Complete this comprehensive assessment to get personalized career recommendations</p>
        </div>
        <div class="card-body p-4">
          {% if messages %}
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
              </div>
            {% endfor %}
          {% endif %}

          <form method="POST" id="assessmentForm">
            {% csrf_token %}
            
            <!-- Basic Information Section -->
            <div class="row mb-4">
              <div class="col-12">
                <h5 class="text-primary border-bottom pb-2">
                  <i class="fas fa-user me-2"></i>Basic Information
                </h5>
              </div>
            </div>

            <div class="row">
              <!-- Name -->
              <div class="col-md-6 mb-3">
                <label for="name" class="form-label">Full Name *</label>
                <input type="text" class="form-control" id="name" name="name" required 
                       placeholder="Enter your full name">
              </div>

              <!-- Age -->
              <div class="col-md-6 mb-3">
                <label for="age" class="form-label">Age *</label>
                <input type="number" class="form-control" id="age" name="age" required 
                       min="16" max="50" placeholder="Your age">
              </div>
            </div>

            <!-- Education Level -->
            <div class="mb-4">
              <label for="education_level" class="form-label">Education Level *</label>
              <select class="form-select" id="education_level" name="education_level" required>
                <option value="" disabled selected>Select your level</option>
                <option value="highschool">High School</option>
                <option value="undergrad">Undergraduate</option>
                <option value="postgrad">Postgraduate</option>
              </select>
            </div>

            <!-- Subject Scores Section -->
            <div class="row mb-4">
              <div class="col-12">
                <h5 class="text-primary border-bottom pb-2">
                  <i class="fas fa-book me-2"></i>Academic Performance
                </h5>
                <p class="text-muted mb-3">Rate your performance in these subjects (0-100)</p>
              </div>
            </div>

            <div class="row">
              <!-- STEM Subjects -->
              <div class="col-md-6">
                <h6 class="text-success mb-3">STEM Subjects</h6>
                
                <div class="mb-3">
                  <label for="score_mathematics" class="form-label">Mathematics</label>
                  <input type="number" class="form-control" id="score_mathematics" 
                         name="score_mathematics" min="0" max="100" placeholder="0-100">
                </div>
                
                <div class="mb-3">
                  <label for="score_physics" class="form-label">Physics</label>
                  <input type="number" class="form-control" id="score_physics" 
                         name="score_physics" min="0" max="100" placeholder="0-100">
                </div>
                
                <div class="mb-3">
                  <label for="score_chemistry" class="form-label">Chemistry</label>
                  <input type="number" class="form-control" id="score_chemistry" 
                         name="score_chemistry" min="0" max="100" placeholder="0-100">
                </div>
                
                <div class="mb-3">
                  <label for="score_biology" class="form-label">Biology</label>
                  <input type="number" class="form-control" id="score_biology" 
                         name="score_biology" min="0" max="100" placeholder="0-100">
                </div>
                
                <div class="mb-3">
                  <label for="score_computer_science" class="form-label">Computer Science</label>
                  <input type="number" class="form-control" id="score_computer_science" 
                         name="score_computer_science" min="0" max="100" placeholder="0-100">
                </div>
              </div>

              <!-- Other Subjects -->
              <div class="col-md-6">
                <h6 class="text-info mb-3">Other Subjects</h6>
                
                <div class="mb-3">
                  <label for="score_english" class="form-label">English</label>
                  <input type="number" class="form-control" id="score_english" 
                         name="score_english" min="0" max="100" placeholder="0-100">
                </div>
                
                <div class="mb-3">
                  <label for="score_history" class="form-label">History</label>
                  <input type="number" class="form-control" id="score_history" 
                         name="score_history" min="0" max="100" placeholder="0-100">
                </div>
                
                <div class="mb-3">
                  <label for="score_economics" class="form-label">Economics</label>
                  <input type="number" class="form-control" id="score_economics" 
                         name="score_economics" min="0" max="100" placeholder="0-100">
                </div>
                
                <div class="mb-3">
                  <label for="score_business_studies" class="form-label">Business Studies</label>
                  <input type="number" class="form-control" id="score_business_studies" 
                         name="score_business_studies" min="0" max="100" placeholder="0-100">
                </div>
                
                <div class="mb-3">
                  <label for="score_art" class="form-label">Art</label>
                  <input type="number" class="form-control" id="score_art" 
                         name="score_art" min="0" max="100" placeholder="0-100">
                </div>
              </div>
            </div>

            <!-- Career Interests Section -->
            <div class="row mb-4">
              <div class="col-12">
                <h5 class="text-primary border-bottom pb-2">
                  <i class="fas fa-heart me-2"></i>Career Interests
                </h5>
                <p class="text-muted mb-3">Select areas that interest you most</p>
              </div>
            </div>

            <div class="row mb-4">
              <div class="col-md-6">
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="interests" value="engineering" id="interest_engineering">
                  <label class="form-check-label" for="interest_engineering">
                    <i class="fas fa-cog me-2"></i>Engineering & Technology
                  </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="interests" value="science" id="interest_science">
                  <label class="form-check-label" for="interest_science">
                    <i class="fas fa-microscope me-2"></i>Science & Research
                  </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="interests" value="business" id="interest_business">
                  <label class="form-check-label" for="interest_business">
                    <i class="fas fa-briefcase me-2"></i>Business & Finance
                  </label>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="interests" value="arts" id="interest_arts">
                  <label class="form-check-label" for="interest_arts">
                    <i class="fas fa-palette me-2"></i>Arts & Creative
                  </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="interests" value="healthcare" id="interest_healthcare">
                  <label class="form-check-label" for="interest_healthcare">
                    <i class="fas fa-heartbeat me-2"></i>Healthcare & Medicine
                  </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="interests" value="education" id="interest_education">
                  <label class="form-check-label" for="interest_education">
                    <i class="fas fa-graduation-cap me-2"></i>Education & Teaching
                  </label>
                </div>
              </div>
            </div>

            <!-- Personality Traits Section -->
            <div class="row mb-4">
              <div class="col-12">
                <h5 class="text-primary border-bottom pb-2">
                  <i class="fas fa-user-check me-2"></i>Personality & Preferences
                </h5>
                <p class="text-muted mb-3">Tell us about your working style and preferences</p>
              </div>
            </div>

            <div class="row mb-4">
              <div class="col-md-6">
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="enjoys_problem_solving" id="problem_solving">
                  <label class="form-check-label" for="problem_solving">
                    I enjoy solving complex problems
                  </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="enjoys_creative_activities" id="creative">
                  <label class="form-check-label" for="creative">
                    I enjoy creative activities
                  </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="enjoys_analytical_thinking" id="analytical">
                  <label class="form-check-label" for="analytical">
                    I enjoy analytical thinking
                  </label>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="prefers_working_with_people" id="social">
                  <label class="form-check-label" for="social">
                    I prefer working with people
                  </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="likes_leadership_roles" id="leadership">
                  <label class="form-check-label" for="leadership">
                    I like leadership roles
                  </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" name="interested_in_helping_others" id="helping">
                  <label class="form-check-label" for="helping">
                    I'm interested in helping others
                  </label>
                </div>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="text-center">
              <button type="submit" class="btn btn-success btn-lg px-5">
                <i class="fas fa-robot me-2"></i>Run AI Assessment
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Add form validation and UX improvements
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('assessmentForm');
    const submitBtn = form.querySelector('button[type="submit"]');
    
    form.addEventListener('submit', function(e) {
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Processing...';
        submitBtn.disabled = true;
    });
    
    // Add input validation for score fields
    const scoreInputs = document.querySelectorAll('input[name^="score_"]');
    scoreInputs.forEach(input => {
        input.addEventListener('input', function() {
            const value = parseInt(this.value);
            if (value > 100) this.value = 100;
            if (value < 0) this.value = 0;
        });
    });
});
</script>
{% endblock %}